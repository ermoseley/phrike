# 2D Gaussian Wave Packet Configuration
# Tests 2D wave propagation with boundary reflections using Legendre basis

problem:
  name: "gaussian_wave2d"
  description: "2D Gaussian wave packet traveling at 45° with wall reflections"

# Grid configuration
grid:
  Nx: 64                    # Number of modes in x-direction
  Ny: 64                    # Number of modes in y-direction
  Lx: 1.0                   # Domain length in x
  Ly: 1.0                   # Domain length in y
  basis_x: "legendre"       # Use Legendre basis in x
  basis_y: "legendre"       # Use Legendre basis in y
  bc: "dirichlet"           # Dirichlet boundary conditions
  dealias: false            # No dealiasing for Legendre
  precision: "double"       # Use double precision

# Initial conditions
initial_conditions:
  rho0: 1.0                 # Background density
  u0: 0.0                   # Background x-velocity
  v0: 0.0                   # Background y-velocity
  p0: 1.0                   # Background pressure
  amplitude: 0.1            # Wave amplitude
  sigma: 0.05               # Wave packet width
  x0: 0.5                   # Initial x position (center of domain)
  y0: 0.5                   # Initial y position (center of domain)
  angle: 45.0               # Wave direction in degrees (45° towards left and up)

# Physics
physics:
  gamma: 1.4                # Adiabatic index
  gravity:
    enabled: false          # No gravity for this test

# Integration
integration:
  t0: 0.0                   # Start time
  t_end: 2.0                # End time (enough for multiple reflections)
  dt: 1e-4                  # Initial time step
  scheme: "rk4"             # 4th order Runge-Kutta
  cfl: 0.5                  # CFL number
  adaptive_dt: true         # Use adaptive time stepping
  spectral_filter:
    enabled: true           # Enable spectral filtering
    p: 8                    # Filter order
    alpha: 36.0             # Filter strength

# Artificial viscosity (small amount for stability)
artificial_viscosity:
  enabled: true
  nu_max: 1e-4              # Maximum viscosity
  s_ref: 1.0                # Reference strain rate
  s_min: 0.1                # Minimum strain rate
  p: 2.0                    # Viscosity power law
  epsilon: 1e-12            # Small number to avoid division by zero
  variable_weights:
    density: 1.0
    momentum_x: 1.0
    momentum_y: 1.0
    energy: 1.0
  sensor_variable: "density"
  diagnostic_output: false

# Output
io:
  outdir: "outputs/gaussian_wave2d"
  output_interval: 0.0125   # Output every 0.0125 time units (4x more frames)
  save_frames: true         # Save frames for video generation
  frames_dir: "frames"      # Subdirectory for frames

# Monitoring
monitoring:
  step_interval: 10         # Print status every 10 steps
  verbose: true             # Verbose output

# Visualization
visualization:
  create_plots: true        # Create analysis plots
  plot_interval: 0.0125     # Plot every 0.0125 time units (4x more frames)
  save_plots: true          # Save plots to disk
