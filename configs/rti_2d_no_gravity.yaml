# Configuration for 2D RTI test with gravity turned off but same density/pressure profiles
problem: rti

grid:
  Nx: 128                     # Number of grid points in x
  Ny: 256                     # Number of grid points in y
  Lx: 1.0                     # Domain length in x
  Ly: 2.0                     # Domain length in y
  basis_x: legendre           # Use Legendre basis for non-periodic BCs
  basis_y: legendre           # Use Legendre basis for non-periodic BCs
  bc: dirichlet               # Dirichlet boundary conditions on all sides
  dealias: false              # Not applicable for Legendre basis
  precision: single           # Use single precision for MPS compatibility

physics:
  gamma: 1.4                  # Adiabatic index

integration:
  t0: 0.0
  t_end: 2.0                  # Run for 2 time units
  cfl: 0.3                    # Conservative CFL for Legendre
  scheme: rk4                 # Stable scheme for Legendre
  output_interval: 0.05       # Output every 0.05 time units
  checkpoint_interval: 0.2    # Checkpoints every 0.2 time units
  spectral_filter:
    enabled: true
    p: 8                      # Even integer >= 2
    alpha: 36.0               # Filter strength

adaptive:
  enabled: true
  scheme: rk45
  rtol: 1e-5                  # Relaxed for single precision
  atol: 1e-7                  # Relaxed for single precision
  safety_factor: 0.9
  min_dt_factor: 0.1
  max_dt_factor: 5.0
  max_rejections: 10
  fallback_scheme: rk4

artificial_viscosity:
  enabled: true
  mode: constant
  nu_constant: 0.0005         # Small constant viscosity
  variable_weights:
    density: 1.0
    momentum_x: 1.0
    momentum_y: 1.0
    energy: 1.0
  diagnostic_output: true

# Gravity configuration - TURNED OFF
gravity:
  enabled: false              # Gravity turned off
  type: "linear"
  gx: 0.0                     # No gravity
  gy: 0.0
  gz: 0.0

# RTI initial conditions - same profiles as before
initial_conditions:
  rho_light: 1.0              # Density of light fluid (bottom)
  rho_heavy: 2.0              # Density of heavy fluid (top)
  pressure_base: 1.0          # Base pressure at the interface
  perturb_amplitude: 0.01     # Amplitude of initial velocity perturbation
  perturb_wavelength: 1.0     # Wavelength of the perturbation (matches Lx)

runtime:
  num_threads: 4              # Use 4 threads for parallel Legendre operations

io:
  outdir: outputs/rti_2d_no_gravity
  save_spectra: false

monitoring:
  enabled: true
  step_interval: 50
  include_conservation: true
  include_timestep: true
  include_time: true
  include_velocity_stats: true
  include_density_stats: true

video:
  fps: 30
  width: 1280
  height: 720
  scale: 1.0
  frame_dpi: 150
  codec: h264_videotoolbox
  crf: 20
  preset: medium
  pix_fmt: yuv420p
